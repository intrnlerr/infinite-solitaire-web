<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>infinite solitaire</title>
    <script type="module">
        import init, {card_tex_loaded, start, on_resize, mouse_up, mouse_down, mouse_move, first_resize} from "./infinite_klondike_web.js";
        
        async function run() {
            await init()

            const canvas = document.getElementById("canvas")
            
            start()

            canvas.width = window.innerWidth
            canvas.height = window.innerHeight
            first_resize(window.innerWidth, window.innerHeight)
            window.onresize = () => {
                canvas.width = window.innerWidth
                canvas.height = window.innerHeight
                on_resize(window.innerWidth, window.innerHeight)
            }
            
            canvas.onmouseup = ev => mouse_up(ev.clientX, ev.clientY)
            canvas.onmousedown = ev => mouse_down(ev.clientX, ev.clientY)
            canvas.onmousemove = ev => mouse_move(ev.clientX, ev.clientY)

            const cards = new Image();
            cards.onload = () => {
                card_tex_loaded(cards);
            }
            cards.src = "cards.png"
        }
        run()

    </script>
</head>
<body style="margin: 0;overflow: hidden;">
    <canvas width="800" height="600" id="canvas" style="width: 100%; height:100%;overflow: hidden;">
</body>
</html>